<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shaka Player with HLS and Quality Selection</title>

    <!-- Shaka Player CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/3.0.0/shaka-player.compiled.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #333;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        #player-container {
            width: 80%;
            max-width: 800px;
            background-color: black;
        }
    </style>
</head>
<body>

    <div id="player-container"></div>

    <script>
        // Initialize Shaka Player
        function initializePlayer() {
            const video = document.createElement('video');
            document.getElementById('player-container').appendChild(video);

            // Create a new Shaka Player instance
            const player = new shaka.Player(video);

            // Attach error handling to the player
            player.addEventListener('error', onError);

            // Load the HLS stream URL
            const streamUrl = 'https://vhoichoi.viewlift.com/Renditions/20241028/1730121916094_maaza_grand_pujo_parikrama_platform/hls/1730121916094_maaza_grand_pujo_parikrama_platform.m3u8';

            // Configure player options to support HLS
            player.load(streamUrl).then(function() {
                console.log('The video has successfully loaded!');
            }).catch(onError);

            // Enable the quality selector
            player.configure({
                abr: {
                    enabled: true, // Enable Adaptive Bitrate
                    defaultBandwidthEstimate: 5000000, // Adjust as necessary
                }
            });

            // Add Quality Selector UI (you can customize this)
            const ui = new shaka.ui.Controls(player, video);
            ui.configure({
                controlPanelElements: ['playpause', 'volume', 'progress', 'time', 'fullscreen', 'quality']
            });
        }

        // Error handler
        function onError(error) {
            console.error('Error code', error.code, 'object', error);
        }

        // Initialize Shaka Player when the page is loaded
        window.onload = initializePlayer;
    </script>

</body>
</html>
